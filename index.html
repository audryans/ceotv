<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Private Stream Access</title>

<style>
  body {
    background: #050505;
    color: #00fff0;
    font-family: Arial, sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .card {
    border: 2px solid #00fff0;
    border-radius: 12px;
    padding: 30px;
    width: 100%;
    max-width: 380px;
    text-align: center;
    box-shadow: 0 0 25px #00fff0;
    animation: glow 2.5s infinite alternate;
  }

  h1 {
    color: #ff00ff;
    text-shadow: 0 0 15px #ff00ff;
    animation: flicker 3s infinite;
  }

  input, button {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border-radius: 8px;
    background: transparent;
    border: 2px solid #00fff0;
    color: #00fff0;
    font-size: 15px;
  }

  button {
    cursor: pointer;
    transition: 0.3s;
    position: relative;
    overflow: hidden;
  }

  button:hover {
    background: #00fff0;
    color: #000;
    box-shadow: 0 0 15px #00fff0;
  }

  @keyframes glow {
    0% { box-shadow: 0 0 10px #00fff0; }
    50% { box-shadow: 0 0 30px #00fff0, 0 0 60px #ff00ff; }
    100% { box-shadow: 0 0 10px #00fff0; }
  }

  @keyframes flicker {
    0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; }
    20%, 24%, 55% { opacity: 0.6; }
  }

</style>
</head>

<body>

<div class="card">
  <h1>Secure Stream Access</h1>

  <input id="name" placeholder="Full Name">
  <input id="phone" placeholder="Phone Number">

  <button id="loginBtn">Continue to Stream</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

/* Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyA5lFZWR8KaPhYyGPEGD3VI3Ziz5ANpau4",
  authDomain: "private-stream-4e400.firebaseapp.com",
  projectId: "private-stream-4e400",
  storageBucket: "private-stream-4e400.appspot.com",
  messagingSenderId: "333562639763",
  appId: "1:333562639763:web:08e551d7c52e5cebff2466"
};

/* Initialize Firebase */
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById("loginBtn").addEventListener("click", async () => {
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();

  if (!name || !phone) {
    alert("Please enter your full name and phone number");
    return;
  }

  try {
    await setDoc(doc(db, "users", phone), {
      name,
      phone,
      timestamp: new Date().toLocaleString()
    });

    // redirect to stream page
    window.location.href = "stream.html";
  } catch (err) {
    console.error(err);
    alert("Error saving your info. Try again.");
  }
});
</script>

</body>
</html>
